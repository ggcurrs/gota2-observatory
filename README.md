# gota2-observatory
## stockb.py
某掲示板の某板のスクレイピング実験用のスクリプトです。

0 起動すると、カレントディレクトリの下に"DownloadedHtml"ディレクトリ（フォルダ）が生成されます。

1 最初にスレッド一覧の所在を聞かれます（"Thread list URLs?"）ので、 "https://example.com/foo/bar.html" のような形式で入力してください。全スレッドhtmlのURL一覧が表示されるので、状況を確認してください。

2 次に、各スレッドのhtmlが格納されているディレクトリを聞かれます（"Base URL?"）ので、これも "http://example.com/baz/qux/" のような感じで入力してください（最後は"/"。ここはわざと曖昧に書いてあるので、実際のサイトを見て工夫してください）。

3 スレッドの所在一覧が表示されますので、良さそうだったら"y"を入力してください。

4 ADSL環境で、300スレッド程度（全部で大体60 MBぐらい）のダウンロードが約30分で完了し、格納先の"DownloadedHtml"フォルダが開きます。

5 後は煮るなり焼くなり。なお、htmlのencodingはUTF-8です。ブラウザによっては自動判別だと文字化けするので、その場合は手動でUTF-8に設定してください。

6 設定をいじるとダウンロード速度を上げることができますが、相手のサーバに負担を掛けてしまうので自粛してください。うっかりすると新聞沙汰になって一躍有名人になれるかもしれないので、くれぐれも良識ある行動をお願いします。


## stockb2csv.py
stockb.pyでダウンロードしたhtmlファイルをパースしてCSVに整理して書き込みます。


0 起動すると、カレントディレクトリの下に、"DownloadedHtml"と"Converted"のふたつディレクトリ（フォルダ）が生成されます。（既に存在している場合作らない）
- 対象となるHTMLファイルは"DownloadedHtml"フォルダに格納されている前提。

- ファイルネームは"DownloadedHtml_[number].html"の形式を想定。

1 変換するファイル数を入力します。

2 csvに変換されたファイルは"Converted"に格納され、同フォルダが開きます。


## stockb_20070602-20190813.csv
- インターネットの巨大掲示板の「株個別銘柄(仮)」板の2007年06月02日〜2019月08月13日の書き込み（dat落ちしたものを除く。）を整理したCSVファイルです。
- 分析用のデータですので、メッセージ本体のデータは9文字目以降削除してあります。これだけでも銘柄ごとの書き込み速度は分析できます。
- 87,348行、14 MB、encoding = UTF-8、BOM無しのデータです。


## wikipedia-table.ipynb
- ある特定のWikipediaページの表を抽出するスクリプト（Jupyter Notebook用）です。
- TARGET_URLのほか、firstBlockStarts, secondBlockStarts, thirdBlockStarts, blockEndsなどのパラメータを
blockEndsなどの変更すればそれなりに汎用性があります。
- CSVファイルで出力した場合、encoding = UTF-8、BOM無しとなるので、Excelから開く場合はencodingを手動で設定してください。
